{"version":3,"sources":["pages/ReviewsPage/ReviewsPage.module.css","services/getReviews.js","pages/ReviewsPage/ReviewsPage.js"],"names":["module","exports","getReviews","id","axios","get","ReviewsPage","state","reviews","this","props","match","params","then","response","data","results","length","setState","slice","prevProps","prevState","listHeight","getComputedStyle","document","querySelector","height","replace","heightToScrollDown","documentElement","scrollHeight","window","scrollTo","top","behavior","className","styles","ReviewsList","map","review","key","ReviewsListItem","ReviewsListItemAuthor","author","content","Component"],"mappings":"sFACAA,EAAOC,QAAU,CAAC,YAAc,iCAAiC,gBAAkB,qCAAqC,sBAAwB,6C,4GCOjIC,EANI,SAACC,GAClB,OAAOC,IAAMC,IAAN,6CACiCF,EADjC,6E,iBCCHG,E,4MACJC,MAAQ,CAAEC,QAAS,I,kEAEE,IAAD,OACZL,EAAKM,KAAKC,MAAMC,MAAMC,OAAOT,GACnCD,EAAWC,GAAIU,MAAK,SAACC,GACfA,EAASC,KAAKC,QAAQC,OAAS,GACjC,EAAKC,SAAS,CAAEV,QAASM,EAASC,KAAKC,QAAQG,MAAM,EAAG,MAExD,EAAKD,SAAS,CAAEV,QAASM,EAASC,KAAKC,e,yCAK1BI,EAAWC,GAC5B,GAAIZ,KAAKF,MAAMC,QAAQS,OAAS,EAAG,CACjC,IAAMK,EAAaC,iBACjBC,SAASC,cAAc,UACvBC,OAAOC,QAAQ,YAAa,IACxBC,EACJJ,SAASK,gBAAgBC,aAAeR,EAC1CS,OAAOC,SAAS,CACdC,IAAKL,EACLM,SAAU,gBAGZH,OAAOC,SAAS,CACdC,IAAKT,SAASK,gBAAgBC,aAC9BI,SAAU,a,+BAKN,IACA1B,EAAYC,KAAKF,MAAjBC,QACR,OACE,oCACGA,EAAQS,OAAS,GAChB,wBAAIkB,UAAWC,IAAOC,YAAalC,GAAG,QACnCK,EAAQ8B,KAAI,SAACC,GAAD,OACX,wBAAIC,IAAKD,EAAOpC,GAAIgC,UAAWC,IAAOK,iBACpC,uBAAGN,UAAWC,IAAOM,uBAAwBH,EAAOI,OAApD,KACA,2BAAIJ,EAAOK,cAMC,IAAnBpC,EAAQS,QAAgB,gK,GAhDP4B,aAsDXvC","file":"static/js/reviews-page.0c712fca.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ReviewsList\":\"ReviewsPage_ReviewsList__n-Rkq\",\"ReviewsListItem\":\"ReviewsPage_ReviewsListItem__1RipP\",\"ReviewsListItemAuthor\":\"ReviewsPage_ReviewsListItemAuthor__2eSaE\"};","import axios from \"axios\";\r\n\r\nconst getReviews = (id) => {\r\n  return axios.get(\r\n    `https://api.themoviedb.org/3/movie/${id}/reviews?api_key=22604d7d4d6b8e16c79f6a5ba307d7e0&language=en-US&page=1`\r\n  );\r\n};\r\n\r\nexport default getReviews;\r\n","import React, { Component } from \"react\";\r\nimport getReviews from \"../../services/getReviews\";\r\nimport styles from \"./ReviewsPage.module.css\";\r\n\r\nclass ReviewsPage extends Component {\r\n  state = { reviews: [] };\r\n\r\n  componentDidMount() {\r\n    const id = this.props.match.params.id;\r\n    getReviews(id).then((response) => {\r\n      if (response.data.results.length > 10) {\r\n        this.setState({ reviews: response.data.results.slice(0, 11) });\r\n      } else {\r\n        this.setState({ reviews: response.data.results });\r\n      }\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.reviews.length > 0) {\r\n      const listHeight = getComputedStyle(\r\n        document.querySelector(\"#list\")\r\n      ).height.replace(/[^0-9]/gim, \"\");\r\n      const heightToScrollDown =\r\n        document.documentElement.scrollHeight - listHeight;\r\n      window.scrollTo({\r\n        top: heightToScrollDown,\r\n        behavior: \"smooth\",\r\n      });\r\n    } else {\r\n      window.scrollTo({\r\n        top: document.documentElement.scrollHeight,\r\n        behavior: \"smooth\",\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { reviews } = this.state;\r\n    return (\r\n      <>\r\n        {reviews.length > 0 && (\r\n          <ul className={styles.ReviewsList} id=\"list\">\r\n            {reviews.map((review) => (\r\n              <li key={review.id} className={styles.ReviewsListItem}>\r\n                <p className={styles.ReviewsListItemAuthor}>{review.author}:</p>\r\n                <p>{review.content}</p>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n\r\n        {reviews.length === 0 && <p>К сожалению, обзоров нет</p>}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ReviewsPage;\r\n"],"sourceRoot":""}