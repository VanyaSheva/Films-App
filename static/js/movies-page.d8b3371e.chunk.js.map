{"version":3,"sources":["components/FilmsList/FilmsList.js","components/FilmsList/FilmsList.module.css","pages/MoviesPage/SearchBar.module.css","services/getFilmsWithQuery.js","services/getInfiniteFilmsWithQuery.js","pages/MoviesPage/MoviesPage.js"],"names":["FilmsList","state","films","this","props","className","styles","map","film","key","id","poster_path","ListItem","to","pathname","from","location","src","alt","ListItemImage","ListItemTitle","title","ListItemYear","release_date","Component","module","exports","getTrending","query","axios","get","getInfifniteFilmsWithQuery","counter","MoviesPage","filmsList","onFormSubmit","e","preventDefault","getFilmsWithQuery","then","response","setState","data","results","history","push","search","onInputChange","target","value","fetchMoreData","parsed","queryString","parse","category","prevProps","prevState","onSubmit","SearchForm","placeholder","onChange","required","SearchFormInput","type","SearchFormButton","length","dataLength","next","hasMore"],"mappings":"+KAIMA,E,4MACJC,MAAQ,G,uDACE,IAAD,OACCC,EAAUC,KAAKC,MAAfF,MACR,OACE,wBAAIG,UAAWC,IAAON,WACnBE,EAAMK,KAAI,SAACC,GAAD,OACT,kBAAC,WAAD,CAAUC,IAAKD,EAAKE,IACjBF,EAAKG,aACJ,wBAAIF,IAAKD,EAAKE,GAAIL,UAAWC,IAAOM,UAClC,kBAAC,IAAD,CACEC,GAAI,CACFC,SAAS,UAAD,OAAYN,EAAKE,IACzBT,MAAO,CAAEc,KAAM,EAAKX,MAAMY,YAG5B,yBACEC,IAAG,0CAAqCT,EAAKG,aAC7CO,IAAI,YACJb,UAAWC,IAAOa,gBAEpB,wBAAId,UAAWC,IAAOc,eAAgBZ,EAAKa,OAC3C,wBAAIhB,UAAWC,IAAOgB,cAAed,EAAKe,yB,GAtBpCC,aAiCTxB,O,mBCpCfyB,EAAOC,QAAU,CAAC,UAAY,6BAA6B,SAAW,4BAA4B,cAAgB,iCAAiC,cAAgB,iCAAiC,aAAe,kC,mBCAnND,EAAOC,QAAU,CAAC,UAAY,6BAA6B,WAAa,8BAA8B,iBAAmB,oCAAoC,sBAAwB,yCAAyC,gBAAkB,qC,oHCMjOC,EALK,SAACC,GACnB,OAAOC,IAAMC,IAAN,mGACuFF,K,iCCIjFG,EANoB,SAACH,EAAOI,GACzC,OAAOH,IAAMC,IAAN,mGACuFF,EADvF,iBACqGI,K,iBCG1GA,EAAU,EACRC,E,4MACJhC,MAAQ,CAAE2B,MAAO,GAAIM,UAAW,I,EAmBhCC,aAAe,SAACC,GACdA,EAAEC,iBACFC,EAAkB,EAAKrC,MAAM2B,OAAOW,MAAK,SAACC,GAAD,OACvC,EAAKC,SAAS,CAAEP,UAAWM,EAASE,KAAKC,aAE3C,EAAKvC,MAAMwC,QAAQC,KAAK,CACtB/B,SAAU,EAAKV,MAAMY,SAASF,SAC9BgC,OAAO,YAAD,OAAc,EAAK7C,MAAM2B,U,EAInCmB,cAAgB,SAACX,GACf,EAAKK,SAAS,CAAEb,MAAOQ,EAAEY,OAAOC,S,EAGlCC,cAAgB,WACdnB,EAA2B,EAAK9B,MAAM2B,MAAOI,GAASO,MAAK,SAACC,GAAD,OACzD,EAAKC,UAAS,SAACxC,GAAD,MAAY,CACxBiC,UAAU,GAAD,mBAAMjC,EAAMiC,WAAZ,YAA0BM,EAASE,KAAKC,kB,kEAnClC,IAAD,OAElB,GADAX,EAAU,EACN7B,KAAKC,MAAMY,SAAS8B,OAAQ,CAC9B,IAAMK,EAASC,IAAYC,MAAMlD,KAAKC,MAAMY,SAAS8B,QACrD3C,KAAKsC,SAAS,CAAEb,MAAOuB,EAAOG,WAC9BhB,EAAkBa,EAAOG,UAAUf,MAAK,SAACC,GAAD,OACtC,EAAKC,SAAS,CAAEP,UAAWM,EAASE,KAAKC,gB,yCAK5BY,EAAWC,GACxBA,IAAcrD,KAAKF,QACrB+B,GAAW,K,+BA2BL,IAAD,EACsB7B,KAAKF,MAA1B2B,EADD,EACCA,MAAOM,EADR,EACQA,UACf,OACE,oCACE,0BAAMuB,SAAUtD,KAAKgC,aAAc9B,UAAWC,IAAOoD,YACnD,2BACEC,YAAY,iBACZV,MAAOrB,EACPgC,SAAUzD,KAAK4C,cACfc,UAAQ,EACRxD,UAAWC,IAAOwD,kBAEpB,4BAAQC,KAAK,SAAS1D,UAAWC,IAAO0D,oBAEzC9B,EAAU+B,OAAS,GAClB,kBAAC,IAAD,CACEC,WAAYhC,EAAU+B,OACtBE,KAAMhE,KAAK+C,cACXkB,SAAS,GAET,kBAACpE,EAAA,EAAD,CAAWE,MAAOgC,EAAWlB,SAAUY,U,GA/D1BJ,aAuEVS","file":"static/js/movies-page.d8b3371e.chunk.js","sourcesContent":["import React, { Component, Fragment } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport styles from \"./FilmsList.module.css\";\r\n\r\nclass FilmsList extends Component {\r\n  state = {};\r\n  render() {\r\n    const { films } = this.props;\r\n    return (\r\n      <ul className={styles.FilmsList}>\r\n        {films.map((film) => (\r\n          <Fragment key={film.id}>\r\n            {film.poster_path && (\r\n              <li key={film.id} className={styles.ListItem}>\r\n                <Link\r\n                  to={{\r\n                    pathname: `/films/${film.id}`,\r\n                    state: { from: this.props.location },\r\n                  }}\r\n                >\r\n                  <img\r\n                    src={`https://image.tmdb.org/t/p/w300/${film.poster_path}`}\r\n                    alt=\"film_post\"\r\n                    className={styles.ListItemImage}\r\n                  />\r\n                  <h5 className={styles.ListItemTitle}>{film.title}</h5>\r\n                  <h6 className={styles.ListItemYear}>{film.release_date}</h6>\r\n                </Link>\r\n              </li>\r\n            )}\r\n          </Fragment>\r\n        ))}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FilmsList;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FilmsList\":\"FilmsList_FilmsList__1PYYs\",\"ListItem\":\"FilmsList_ListItem__3Vus-\",\"ListItemImage\":\"FilmsList_ListItemImage__4TaJr\",\"ListItemTitle\":\"FilmsList_ListItemTitle__3YI0q\",\"ListItemYear\":\"FilmsList_ListItemYear__3ppXg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"SearchBar_Searchbar__1SxOw\",\"SearchForm\":\"SearchBar_SearchForm__1RScY\",\"SearchFormButton\":\"SearchBar_SearchFormButton__3HAwE\",\"SearchFormButtonLabel\":\"SearchBar_SearchFormButtonLabel__RGSqv\",\"SearchFormInput\":\"SearchBar_SearchFormInput__1z0wR\"};","import axios from \"axios\";\r\n\r\nconst getTrending = (query) => {\r\n  return axios.get(\r\n    `https://api.themoviedb.org/3/search/movie?api_key=22604d7d4d6b8e16c79f6a5ba307d7e0&query=${query}`\r\n  );\r\n};\r\nexport default getTrending;\r\n","import axios from \"axios\";\r\n\r\nconst getInfifniteFilmsWithQuery = (query, counter) => {\r\n  return axios.get(\r\n    `https://api.themoviedb.org/3/search/movie?api_key=22604d7d4d6b8e16c79f6a5ba307d7e0&query=${query}&page=${counter}`\r\n  );\r\n};\r\n\r\nexport default getInfifniteFilmsWithQuery;\r\n","import React, { Component } from \"react\";\r\nimport getFilmsWithQuery from \"../../services/getFilmsWithQuery\";\r\nimport FilmsList from \"../../components/FilmsList/FilmsList\";\r\nimport queryString from \"query-string\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\nimport getInfifniteFilmsWithQuery from \"../../services/getInfiniteFilmsWithQuery\";\r\nimport styles from \"./SearchBar.module.css\";\r\nlet counter = 0;\r\nclass MoviesPage extends Component {\r\n  state = { query: \"\", filmsList: [] };\r\n\r\n  componentDidMount() {\r\n    counter = 0;\r\n    if (this.props.location.search) {\r\n      const parsed = queryString.parse(this.props.location.search);\r\n      this.setState({ query: parsed.category });\r\n      getFilmsWithQuery(parsed.category).then((response) =>\r\n        this.setState({ filmsList: response.data.results })\r\n      );\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState !== this.state) {\r\n      counter += 1;\r\n    }\r\n  }\r\n\r\n  onFormSubmit = (e) => {\r\n    e.preventDefault();\r\n    getFilmsWithQuery(this.state.query).then((response) =>\r\n      this.setState({ filmsList: response.data.results })\r\n    );\r\n    this.props.history.push({\r\n      pathname: this.props.location.pathname,\r\n      search: `category=${this.state.query}`,\r\n    });\r\n  };\r\n\r\n  onInputChange = (e) => {\r\n    this.setState({ query: e.target.value });\r\n  };\r\n\r\n  fetchMoreData = () => {\r\n    getInfifniteFilmsWithQuery(this.state.query, counter).then((response) =>\r\n      this.setState((state) => ({\r\n        filmsList: [...state.filmsList, ...response.data.results],\r\n      }))\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { query, filmsList } = this.state;\r\n    return (\r\n      <>\r\n        <form onSubmit={this.onFormSubmit} className={styles.SearchForm}>\r\n          <input\r\n            placeholder=\"Type to search\"\r\n            value={query}\r\n            onChange={this.onInputChange}\r\n            required\r\n            className={styles.SearchFormInput}\r\n          />\r\n          <button type=\"submit\" className={styles.SearchFormButton}></button>\r\n        </form>\r\n        {filmsList.length > 0 && (\r\n          <InfiniteScroll\r\n            dataLength={filmsList.length}\r\n            next={this.fetchMoreData}\r\n            hasMore={true}\r\n          >\r\n            <FilmsList films={filmsList} location={query} />\r\n          </InfiniteScroll>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MoviesPage;\r\n"],"sourceRoot":""}