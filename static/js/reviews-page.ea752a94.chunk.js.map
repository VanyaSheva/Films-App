{"version":3,"sources":["pages/ReviewsPage/ReviewsPage.module.css","services/getReviews.js","pages/ReviewsPage/ReviewsPage.js"],"names":["module","exports","getReviews","id","axios","get","ReviewsPage","state","reviews","onButtonClick","window","scrollTo","top","behavior","this","props","match","params","then","response","data","results","length","setState","slice","prevProps","prevState","listHeight","getComputedStyle","document","querySelector","height","replace","heightToScrollDown","documentElement","scrollHeight","className","styles","ReviewsList","map","review","key","author","content","onClick","ButtonToTop","Component"],"mappings":"sFACAA,EAAOC,QAAU,CAAC,YAAc,iCAAiC,YAAc,mC,4GCOhEC,EANI,SAACC,GAClB,OAAOC,IAAMC,IAAN,6CACiCF,EADjC,6E,iBCCHG,E,4MACJC,MAAQ,CAAEC,QAAS,I,EAYnBC,cAAgB,WACdC,OAAOC,SAAS,CACdC,IAAK,EACLC,SAAU,Y,kEAbO,IAAD,OACZV,EAAKW,KAAKC,MAAMC,MAAMC,OAAOd,GACnCD,EAAWC,GAAIe,MAAK,SAACC,GACfA,EAASC,KAAKC,QAAQC,OAAS,GACjC,EAAKC,SAAS,CAAEf,QAASW,EAASC,KAAKC,QAAQG,MAAM,EAAG,MAExD,EAAKD,SAAS,CAAEf,QAASW,EAASC,KAAKC,e,yCAU1BI,EAAWC,GAC5B,IAAMC,EAAaC,iBACjBC,SAASC,cAAc,UACvBC,OAAOC,QAAQ,YAAa,IACxBC,EACJJ,SAASK,gBAAgBC,aAAeR,EAAa,IACvDjB,OAAOC,SAAS,CACdC,IAAKqB,EACLpB,SAAU,a,+BAIJ,IACAL,EAAYM,KAAKP,MAAjBC,QACR,OACE,oCACGA,EAAQc,OAAS,GAChB,wBAAIc,UAAWC,IAAOC,YAAanC,GAAG,QACnCK,EAAQ+B,KAAI,SAACC,GAAD,OACX,wBAAIC,IAAKD,EAAOrC,IACd,2BAAIqC,EAAOE,QACX,2BAAIF,EAAOG,cAKnB,4BACEC,QAAS9B,KAAKL,cACd2B,UAAWC,IAAOQ,cAEA,IAAnBrC,EAAQc,QAAgB,gK,GAjDPwB,aAuDXxC","file":"static/js/reviews-page.ea752a94.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ReviewsList\":\"ReviewsPage_ReviewsList__n-Rkq\",\"ButtonToTop\":\"ReviewsPage_ButtonToTop__3PEU_\"};","import axios from \"axios\";\r\n\r\nconst getReviews = (id) => {\r\n  return axios.get(\r\n    `https://api.themoviedb.org/3/movie/${id}/reviews?api_key=22604d7d4d6b8e16c79f6a5ba307d7e0&language=en-US&page=1`\r\n  );\r\n};\r\n\r\nexport default getReviews;\r\n","import React, { Component } from \"react\";\r\nimport getReviews from \"../../services/getReviews\";\r\nimport styles from \"./ReviewsPage.module.css\";\r\n\r\nclass ReviewsPage extends Component {\r\n  state = { reviews: [] };\r\n\r\n  componentDidMount() {\r\n    const id = this.props.match.params.id;\r\n    getReviews(id).then((response) => {\r\n      if (response.data.results.length > 10) {\r\n        this.setState({ reviews: response.data.results.slice(0, 11) });\r\n      } else {\r\n        this.setState({ reviews: response.data.results });\r\n      }\r\n    });\r\n  }\r\n  onButtonClick = () => {\r\n    window.scrollTo({\r\n      top: 0,\r\n      behavior: \"smooth\",\r\n    });\r\n  };\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const listHeight = getComputedStyle(\r\n      document.querySelector(\"#list\")\r\n    ).height.replace(/[^0-9]/gim, \"\");\r\n    const heightToScrollDown =\r\n      document.documentElement.scrollHeight - listHeight - 200;\r\n    window.scrollTo({\r\n      top: heightToScrollDown,\r\n      behavior: \"smooth\",\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { reviews } = this.state;\r\n    return (\r\n      <>\r\n        {reviews.length > 0 && (\r\n          <ul className={styles.ReviewsList} id=\"list\">\r\n            {reviews.map((review) => (\r\n              <li key={review.id}>\r\n                <p>{review.author}</p>\r\n                <p>{review.content}</p>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n        <button\r\n          onClick={this.onButtonClick}\r\n          className={styles.ButtonToTop}\r\n        ></button>\r\n        {reviews.length === 0 && <p>К сожалению, обзоров нет</p>}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ReviewsPage;\r\n"],"sourceRoot":""}